function getAllStatusKiriman(a,t){var i=$(a).data("id");ajaxCall(getAllStatusKirimanUrl,{shipment_id:i},function(a){var i=JSON.parse(a);if("success"==i.status){"Pesanan","Dikirim","Diambil","Diterima";var s="";s+="<div class='detail-status'>",s+="<div class='detail-status-title'>Status</div>",s+="<div class='status-item'><span class='status-badge' data-status='0'>Pending</span><span class='status-time'>"+i.pending_date+"</span></div>",s+='<svg class="svg-right-arrow" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 129 129" width="22" height="22" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="m40.4,121.3c-0.8,0.8-1.8,1.2-2.9,1.2s-2.1-0.4-2.9-1.2c-1.6-1.6-1.6-4.2 0-5.8l51-51-51-51c-1.6-1.6-1.6-4.2 0-5.8 1.6-1.6 4.2-1.6 5.8,0l53.9,53.9c1.6,1.6 1.6,4.2 0,5.8l-53.9,53.9z"/></g></svg>',s+="<div class='status-item'><span class='status-badge' data-status='1'>Konfirmasi</span><span class='status-time'>"+i.confirmation_date+"</span></div>",s+='<svg class="svg-right-arrow" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 129 129" width="22" height="22" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="m40.4,121.3c-0.8,0.8-1.8,1.2-2.9,1.2s-2.1-0.4-2.9-1.2c-1.6-1.6-1.6-4.2 0-5.8l51-51-51-51c-1.6-1.6-1.6-4.2 0-5.8 1.6-1.6 4.2-1.6 5.8,0l53.9,53.9c1.6,1.6 1.6,4.2 0,5.8l-53.9,53.9z"/></g></svg>',s+="<div class='status-item'><span class='status-badge' data-status='2'>Pesanan</span><span class='status-time'>"+i.order_date+"</span></div>",s+='<svg class="svg-right-arrow" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 129 129" width="22" height="22" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="m40.4,121.3c-0.8,0.8-1.8,1.2-2.9,1.2s-2.1-0.4-2.9-1.2c-1.6-1.6-1.6-4.2 0-5.8l51-51-51-51c-1.6-1.6-1.6-4.2 0-5.8 1.6-1.6 4.2-1.6 5.8,0l53.9,53.9c1.6,1.6 1.6,4.2 0,5.8l-53.9,53.9z"/></g></svg>',s+="<div class='status-item'><span class='status-badge' data-status='3'>Dikirim</span><span class='status-time'>"+i.delivery_date+"</span></div>",s+='<svg class="svg-right-arrow" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 129 129" width="22" height="22" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="m40.4,121.3c-0.8,0.8-1.8,1.2-2.9,1.2s-2.1-0.4-2.9-1.2c-1.6-1.6-1.6-4.2 0-5.8l51-51-51-51c-1.6-1.6-1.6-4.2 0-5.8 1.6-1.6 4.2-1.6 5.8,0l53.9,53.9c1.6,1.6 1.6,4.2 0,5.8l-53.9,53.9z"/></g></svg>',s+="<div class='status-item'><span class='status-badge' data-status='4'>Diambil</span><span class='status-time'>"+i.pickup_date+"</span></div>",s+='<svg class="svg-right-arrow" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 129 129" width="22" height="22" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="m40.4,121.3c-0.8,0.8-1.8,1.2-2.9,1.2s-2.1-0.4-2.9-1.2c-1.6-1.6-1.6-4.2 0-5.8l51-51-51-51c-1.6-1.6-1.6-4.2 0-5.8 1.6-1.6 4.2-1.6 5.8,0l53.9,53.9c1.6,1.6 1.6,4.2 0,5.8l-53.9,53.9z"/></g></svg>',s+="<div class='status-item'><span class='status-badge' data-status='5'>Diterima</span><span class='status-time'>"+i.receive_date+"</span></div>",s+='<svg class="svg-right-arrow" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 129 129" width="22" height="22" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="m40.4,121.3c-0.8,0.8-1.8,1.2-2.9,1.2s-2.1-0.4-2.9-1.2c-1.6-1.6-1.6-4.2 0-5.8l51-51-51-51c-1.6-1.6-1.6-4.2 0-5.8 1.6-1.6 4.2-1.6 5.8,0l53.9,53.9c1.6,1.6 1.6,4.2 0,5.8l-53.9,53.9z"/></g></svg>',s+="<div class='status-item'><span class='status-badge' data-status='6'>Selesai</span><span class='status-time'>"+i.end_date+"</span></div>",s+="</div>",$(t).find(".row-detail-td-content").html(s)}})}function getDetailPengirim(a){var t=$(a).data("id");ajaxCall(getDetailPengirimUrl,{shipment_id:t},function(t){var i=jQuery.parseJSON(t),s="";s+="<div class='detail-col'>",s+="<div class='detail-title'>Info Pemilik Barang</div>",s+="<div class='detail-row'><span class='detail-label'>Nama</span><span class='detail-titikdua'> : </span><span class='detail-value'>"+i.user_fullname+"</span></div>",s+="<div class='detail-row'><span class='detail-label'>Alamat</span><span class='detail-titikdua'> : </span><span class='detail-value'>"+i.user_address+"</span></div>",s+="<div class='detail-row'><span class='detail-label'>Telepon</span><span class='detail-titikdua'> : </span><span class='detail-value'>"+i.user_telephone+"</span></div>",s+="<div class='detail-row'><span class='detail-label'>Handphone</span><span class='detail-titikdua'> : </span><span class='detail-value'>"+i.user_handphone+"</span></div>",s+="</div>";var n,e,l,d,r=i.pending_date,o=i.confirmation_date;n=i.order_date,e=i.delivery_date,l=i.pickup_date,d=i.receive_date;var c=1==i.shipment_jenis_muatan?"Penuh":"Parsial";i.shipment_status>1&&(s+="<div class='detail-col'>",s+="<div class='detail-title'>Detail Kiriman</div>",s+="<div class='detail-row'><span class='detail-label'>Jenis Muatan</span><span class='detail-titikdua'> : </span><span class='detail-value'>"+c+"</span></div>",s+="<div class='detail-row'><span class='detail-label'>Supir</span><span class='detail-titikdua'> : </span><span class='detail-value'>"+i.driver_name+"</span></div>",s+="<div class='detail-row'><span class='detail-label'>Kendaraan</span><span class='detail-titikdua'> : </span><span class='detail-value'>"+i.vehicle_name+"</span></div>",s+="<div class='detail-row'><span class='detail-label'>Lacak</span><span class='detail-titikdua'> : </span><span class='detail-value'>"+i.device_name+"</span></div>",s+="</div>"),s+="<div class='detail-status'>",s+="<div class='detail-status-title'>Status</div>",s+="<div class='status-item'><span class='status-badge' data-status='0'>Pending</span><span class='status-time'>"+r+"</span></div>",i.shipment_status>=1&&(s+='<svg class="svg-right-arrow" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 129 129" width="22" height="22" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="m40.4,121.3c-0.8,0.8-1.8,1.2-2.9,1.2s-2.1-0.4-2.9-1.2c-1.6-1.6-1.6-4.2 0-5.8l51-51-51-51c-1.6-1.6-1.6-4.2 0-5.8 1.6-1.6 4.2-1.6 5.8,0l53.9,53.9c1.6,1.6 1.6,4.2 0,5.8l-53.9,53.9z"/></g></svg>',s+="<div class='status-item'><span class='status-badge' data-status='1'>Konfirmasi</span><span class='status-time'>"+o+"</span></div>"),i.shipment_status>=2&&(s+='<svg class="svg-right-arrow" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 129 129" width="22" height="22" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="m40.4,121.3c-0.8,0.8-1.8,1.2-2.9,1.2s-2.1-0.4-2.9-1.2c-1.6-1.6-1.6-4.2 0-5.8l51-51-51-51c-1.6-1.6-1.6-4.2 0-5.8 1.6-1.6 4.2-1.6 5.8,0l53.9,53.9c1.6,1.6 1.6,4.2 0,5.8l-53.9,53.9z"/></g></svg>',s+="<div class='status-item'><span class='status-badge' data-status='2'>Pesanan</span><span class='status-time'>"+n+"</span></div>"),i.shipment_status>=3&&(s+='<svg class="svg-right-arrow" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 129 129" width="22" height="22" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="m40.4,121.3c-0.8,0.8-1.8,1.2-2.9,1.2s-2.1-0.4-2.9-1.2c-1.6-1.6-1.6-4.2 0-5.8l51-51-51-51c-1.6-1.6-1.6-4.2 0-5.8 1.6-1.6 4.2-1.6 5.8,0l53.9,53.9c1.6,1.6 1.6,4.2 0,5.8l-53.9,53.9z"/></g></svg>',s+="<div class='status-item'><span class='status-badge' data-status='3'>Dikirim</span><span class='status-time'>"+e+"</span></div>"),i.shipment_status>=4&&(s+='<svg class="svg-right-arrow" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 129 129" width="22" height="22" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="m40.4,121.3c-0.8,0.8-1.8,1.2-2.9,1.2s-2.1-0.4-2.9-1.2c-1.6-1.6-1.6-4.2 0-5.8l51-51-51-51c-1.6-1.6-1.6-4.2 0-5.8 1.6-1.6 4.2-1.6 5.8,0l53.9,53.9c1.6,1.6 1.6,4.2 0,5.8l-53.9,53.9z"/></g></svg>',s+="<div class='status-item'><span class='status-badge' data-status='4'>Diambil</span><span class='status-time'>"+l+"</span></div>"),i.shipment_status>=5&&(s+='<svg class="svg-right-arrow" version="1.1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 129 129" width="22" height="22" xmlns:xlink="http://www.w3.org/1999/xlink"><g><path d="m40.4,121.3c-0.8,0.8-1.8,1.2-2.9,1.2s-2.1-0.4-2.9-1.2c-1.6-1.6-1.6-4.2 0-5.8l51-51-51-51c-1.6-1.6-1.6-4.2 0-5.8 1.6-1.6 4.2-1.6 5.8,0l53.9,53.9c1.6,1.6 1.6,4.2 0,5.8l-53.9,53.9z"/></g></svg>',s+="<div class='status-item'><span class='status-badge' data-status='5'>Diterima</span><span class='status-time'>"+d+"</span></div>"),s+="</div>",$(a).next().find(".row-detail-td-content").html(s)})}function cancelShipment(){showFullscreenLoading();var a=$(".dialog-konfirmasi-cancel-transaction").data("shipment_id");ajaxCall(cancelShipmentUrl,{shipment_id:a},function(a){hideFullscreenLoading(),"success"==a&&(closeDialog(),refreshData())})}function getKendaraan(){ajaxCall(getKendaraanUrl,null,function(a){var t=jQuery.parseJSON(a),i="",s=t.length;kendaraan=[],i+="<option value='0'>Pilih Kendaraan... </option>";for(var n=0;n<s;n++)kendaraan.push({id:t[n].vehicle_id,name:t[n].vehicle_name,status:t[n].vehicle_details_status,jenis_muatan:t[n].shipment_jenis_muatan,shipment_ids:t[n].shipment_ids}),0==t[n].vehicle_details_status&&(i+="<option value='"+t[n].vehicle_id+"' data-shipment-ids=''>"+t[n].vehicle_name+" </option>");$(".select-kendaraan").append(i)})}function getSupir(){ajaxCall(getSupirUrl,null,function(a){var t=jQuery.parseJSON(a),i="",s=t.length;supir=[],i+="<option value='0'>Pilih Supir... </option>";for(var n=0;n<s;n++)supir.push({id:t[n].driver_id,name:t[n].driver_name,status:t[n].driver_details_status,jenis_muatan:t[n].shipment_jenis_muatan,shipment_ids:t[n].shipment_ids}),0==t[n].driver_details_status&&(i+="<option value='"+t[n].driver_id+"' data-shipment-ids=''>"+t[n].driver_name+" </option>");$(".select-supir").append(i)})}function getAlat(){ajaxCall(getAlatUrl,null,function(a){var t=jQuery.parseJSON(a),i="",s=t.length;alat=[],i+="<option value='0'>Pilih Alat... </option>";for(var n=0;n<s;n++)alat.push({id:t[n].device_id,name:t[n].device_name,status:t[n].device_details_status,jenis_muatan:t[n].shipment_jenis_muatan,shipment_ids:t[n].shipment_ids}),0==t[n].device_details_status&&(i+="<option value='"+t[n].device_id+"' data-shipment-ids=''>"+t[n].device_name+" </option>");$(".select-alat").append(i)})}function submitTerima(){showFullscreenLoading();var a={shipment_id:$(".dialog-konfirmasi-terima-kiriman").data("id")};ajaxCall(submitTerimaUrl,a,function(a){closeDialog(),hideFullscreenLoading(),"success"==a?refreshData():console.log(a)})}function submitAmbil(){showFullscreenLoading();var a={shipment_id:$(".dialog-konfirmasi-ambil-kiriman").data("id")};ajaxCall(submitAmbilUrl,a,function(a){closeDialog(),hideFullscreenLoading(),"success"==a?refreshData():console.log(a)})}function submitKirim(){showFullscreenLoading();var a={shipment_id:$(".dialog-konfirmasi-kirim-kiriman").data("id")};ajaxCall(submitKirimUrl,a,function(a){closeDialog(),hideFullscreenLoading(),"success"==a?refreshData():console.log(a)})}function submitPesan(){var a=$(".dialog-konfirmasi-pesan-kiriman").data("id"),t=$(".dialog-konfirmasi-pesan-kiriman").data("jenis_muatan"),i=$(".dialog-konfirmasi-pesan-kiriman").data("driver_id"),s=$(".dialog-konfirmasi-pesan-kiriman").data("vehicle_id"),n=$(".dialog-konfirmasi-pesan-kiriman").data("device_id");if(0==i||""==i)alert("tidak ada supir yang dipilih");else if(0==s||""==s)alert("tidak ada kendaraan yang dipilih");else{showFullscreenLoading();var e={shipment_id:a,jenis_muatan:t,driver_id:i,vehicle_id:s,device_id:n};ajaxCall(submitPesanUrl,e,function(a){closeDialog(),hideFullscreenLoading(),"success"==a?refreshData():console.log(a)})}}function submitDeal(){showFullscreenLoading();var a={shipment_id:$(".dialog-konfirmasi-deal-kiriman").data("id")};ajaxCall(submitDealUrl,a,function(a){closeDialog(),hideFullscreenLoading(),"success"==a?refreshData():console.log(a)})}function refreshData(){var a=$(".tabs-item.active").data("tabs-number");getKiriman(kirimanUrl[a],a,kirimanTabs[a]),getKirimanCount()}function getKirimanCount(){ajaxCall(getKirimanCountUrl,null,function(a){assignKirimanCount(jQuery.parseJSON(a))})}function assignKirimanCount(a){for(var t={t1:0,t2:0,t3:0,t4:0,t5:0,t6:0,t7:0,t8:0},i=0;i<a.length;i++)switch(a[i].shipment_status){case"0":t.t1=a[i].count;break;case"1":t.t2=a[i].count;break;case"2":t.t3=a[i].count;break;case"3":t.t4=a[i].count;break;case"4":t.t5=a[i].count;break;case"5":t.t6=a[i].count;break;case"6":t.t7=a[i].count;break;case"7":t.t8=a[i].count}for(i=1;i<=8;i++)updateTabsItemCount(i,t["t"+i])}function getKiriman(a,t,i){abortAjaxCall(),$(".tabs-content[data-tabs-number='"+t+"'] .tbody-kiriman").html(""),setLoading(".tabs-content[data-tabs-number='"+t+"'] .table-empty-state"),ajaxCall(a,null,function(a){removeLoading(),addKirimanToTable(jQuery.parseJSON(a),t,i)})}function addKirimanToTable(a,t,i){for(var s=a.length,n={deal:{value:"",btn:"<td><button class='btn-default btn-deal'>Konfirmasi</button><button class='btn-negative btn-batal-pengiriman'>Tolak</button></td>"},pending:{value:"",btn:"<td><button class='btn-default btn-pesan'>Pesan</button><button class='btn-negative btn-batal-pengiriman'>Batalkan</button></td>"},pesanan:{value:"",btn:"<td><button class='btn-default btn-dikirim'>Dikirim</button><button class='btn-negative btn-batal-pengiriman'>Batalkan</button></td>"},dikirim:{value:"",btn:"<td><button class='btn-default btn-diambil'>Diambil</button><button class='btn-negative btn-batal-pengiriman'>Batalkan</button></td>"},diambil:{value:"",btn:"<td><button class='btn-default btn-diterima'>Diterima</button></td>"},diterima:{value:"",btn:""},selesai:{value:"",btn:""},cancel:{value:"",btn:""}},e=0;e<s;e++){var l=new Date(a[e].shipment_delivery_date_from),d=l.getDate()+" "+month[l.getMonth()]+" "+l.getFullYear().toString().substring(2),r=new Date(a[e].shipment_delivery_date_to),o=r.getDate()+" "+month[r.getMonth()]+" "+r.getFullYear().toString().substring(2),c=""==a[e].shipment_pictures?"default.gif":a[e].shipment_pictures,m="Penuh";0==a[e].shipment_jenis_muatan&&(m="Parsial");var u="<button class='btn-default btn-view-kontak'>Info Kiriman</button>",p="<td class='td-jenis-muatan'>"+m+"</td>",h="",v="",g="";switch(i){case"deal":u="",p="";break;case"pending":p="<td><select class='select-jenis-muatan'><option value='1'>Penuh</option><option value='0'>Parsial</option></select></td>",h="<td><div class='td-detail-div'><select class='select-supir'></select></div><div class='td-detail-div'><select class='select-kendaraan'></select></div><div class='td-detail-div'><select class='select-alat'></select></div></td>";break;case"pesanan":case"dikirim":case"diambil":case"diterima":h="<td class='td-supir'>"+a[e].driver_names+"</td><td class='td-kendaraan'>"+a[e].vehicle_names+"</td><td class='td-alat'>"+a[e].device_names+"</td>";break;case"selesai":h="<td class='td-supir'>"+a[e].driver_names+"</td><td class='td-kendaraan'>"+a[e].vehicle_names+"</td><td class='td-alat'>"+a[e].device_names+"</td>",g="<td data-align='center'>"+a[e].waktu_kiriman+" hari</td><td data-align='center'>"+a[e].total_waktu+" hari</td>";break;case"cancel":u="",p="";var b=0==a[e].user_verified?"":"<span class='verified-icon' style='background-image: url("+verifiedIconUrl+");'><div></div></span>";v="<td class='td-cancel_by'><a href='"+profilUrl+a[e].cancel_by+"'>"+a[e].cancel_username+b+"</a></td>"}n[i].value+="<tr class='tr-kiriman' data-id='"+a[e].shipment_id+"' data-shipment-title='"+a[e].shipment_title+"' data-asal='"+a[e].location_from_city+"' data-tujuan='"+a[e].location_to_city+"'><td class='td-title' data-col='nama-kirim'><a href='"+shipmentUrl+a[e].shipment_id+"'><img class='shipment-picture' src='"+shipmentPictureUrl+c+"' onerror='this.onerror=null; this.src=\""+defaultPictureUrl+"\";' /><span>"+a[e].shipment_title+"</span></a></td><td class='td-price' data-col='harga'>Bid : "+a[e].bidding_count+"<br>Low : "+addCommas(a[e].low)+" IDR"+u+"</td><td class='td-asal' data-col='asal'>"+a[e].location_from_city+"<br>"+d+" - "+o+"</td><td class='td-tujuan' data-col='tujuan'>"+a[e].location_to_city+"<br>"+d+" - "+o+"</td><td class='td-km' data-align='center' data-col='km'>"+parseInt(a[e].shipment_length)+"</td>"+p+v+h+n[i].btn+g+"</tr>",n[i].value+="<tr class='row-detail-tr'><td class='row-detail-td' colspan='20'><div class='row-detail-td-content'></div></td></tr>"}0==s?$(".tabs-content[data-tabs-number='"+t+"'] .table-empty-state").addClass("shown"):$(".tabs-content[data-tabs-number='"+t+"'] .table-empty-state").removeClass("shown"),$(".tabs-content[data-tabs-number='"+t+"'] .tbody-kiriman").html(""),$(".tabs-content[data-tabs-number='"+t+"'] .tbody-kiriman").append(n[i].value),"pending"==i&&s>0&&(getAlat(),getSupir(),getKendaraan())}$(function(){$(".tabs-item").on("tabs-item-click",function(){var a=$(this).data("tabs-number");getKiriman(kirimanUrl[a],a,kirimanTabs[a])});var a=window.location.hash;""!=a?(a=a.substring(1),$(".tabs-item[data-label='"+a+"']").click(),0==$(".tabs-item[data-label='"+a+"']").length&&getKiriman(kirimanUrl[1],1,"deal")):getKiriman(kirimanUrl[1],1,"deal"),getKirimanCount(),$(document).on("click",".btn-deal",function(){var a=$(this).closest(".tr-kiriman"),t=a.data("id"),i=a.data("shipment-title"),s=a.data("asal"),n=a.data("tujuan"),e=a.find(".td-km").html();$(".dialog-konfirmasi-deal-kiriman").data("id",t),$(".dialog-konfirmasi-deal-kiriman .dialog-body").html("Nama Kiriman : "+i+"<br>Asal : "+s+"<br>Tujuan : "+n+"<br>Jarak : "+e+" Km"),showDialog(".dialog-konfirmasi-deal-kiriman")}),$(document).on("click",".btn-submit-deal-kiriman",function(){submitDeal()}),$(document).on("change",".select-jenis-muatan",function(){var a=$(this).val(),t=$(this).closest(".tr-kiriman"),i=t.find(".select-supir"),s=t.find(".select-kendaraan"),n=t.find(".select-alat"),e="",l="",d="",r=supir.length,o=kendaraan.length,c=alat.length;if(0==a){e+="<option value='0' data-shipment-ids=''>Pilih Supir... </option>";for(u=0;u<r;u++)if(0==supir[u].status||1==supir[u].status&&0==supir[u].jenis_muatan){m=""==supir[u].shipment_ids?"":" (No. Kirim : "+supir[u].shipment_ids+")";e+="<option value='"+supir[u].id+"' data-shipment-ids='"+supir[u].shipment_ids+"'>"+supir[u].name+m+" </option>"}l+="<option value='0' data-shipment-ids=''>Pilih Kendaraan... </option>";for(p=0;p<o;p++)if(0==kendaraan[p].status||1==kendaraan[p].status&&0==kendaraan[p].jenis_muatan){m=""==kendaraan[p].shipment_ids?"":" (No. Kirim : "+kendaraan[p].shipment_ids+")";l+="<option value='"+kendaraan[p].id+"' data-shipment-ids='"+kendaraan[p].shipment_ids+"'>"+kendaraan[p].name+m+" </option>"}d+="<option value='0' data-shipment-ids=''>Pilih Alat... </option>";for(h=0;h<c;h++)if(0==alat[h].status||1==alat[h].status&&0==alat[h].jenis_muatan){var m=""==alat[h].shipment_ids?"":" (No. Kirim : "+alat[h].shipment_ids+")";d+="<option value='"+alat[h].id+"' data-shipment-ids='"+alat[h].shipment_ids+"'>"+alat[h].name+m+" </option>"}}else{e+="<option value='0' data-shipment-ids=''>Pilih Supir... </option>";for(var u=0;u<r;u++)0==supir[u].status&&(e+="<option value='"+supir[u].id+"' data-shipment-ids=''>"+supir[u].name+" </option>");l+="<option value='0' data-shipment-ids=''>Pilih Kendaraan... </option>";for(var p=0;p<o;p++)0==kendaraan[p].status&&(l+="<option value='"+kendaraan[p].id+"' data-shipment-ids=''>"+kendaraan[p].name+" </option>");d+="<option value='0' data-shipment-ids=''>Pilih Alat... </option>";for(var h=0;h<c;h++)0==alat[h].status&&(d+="<option value='"+alat[h].id+"' data-shipment-ids=''>"+alat[h].name+" </option>")}i.html(e),s.html(l),n.html(d)}),$(document).on("change",".select-supir",function(){var a=$(this).closest(".tr-kiriman"),t=$(this).find(":selected").data("shipment-ids")+"";if(""!=t){for(var i=(t=t.split(","))[0],s="",n=!1,e=0;e<kendaraan.length;e++)if(""!=(s=kendaraan[e].shipment_ids)&&-1!=s.indexOf(i)){a.find(".select-kendaraan").val(kendaraan[e].id),n=!0;break}n||a.find(".select-kendaraan").val(0);for(var l="",d=!1,e=0;e<alat.length;e++)if(""!=(l=alat[e].shipment_ids)&&-1!=l.indexOf(i)){a.find(".select-alat").val(alat[e].id),d=!0;break}d||a.find(".select-alat").val(0)}else if(0==a.find(".select-jenis-muatan").val()){var r=a.find(".select-kendaraan");""!=r.find(":selected").data("shipment-ids")&&r.val(0);var o=a.find(".select-alat");""!=o.find(":selected").data("shipment-ids")&&o.val(0)}}),$(document).on("change",".select-kendaraan",function(){var a=$(this).closest(".tr-kiriman"),t=$(this).find(":selected").data("shipment-ids")+"";if(""!=t){for(var i=(t=t.split(","))[0],s="",n=!1,e=0;e<supir.length;e++)if(""!=(s=supir[e].shipment_ids)&&-1!=s.indexOf(i)){a.find(".select-supir").val(supir[e].id),n=!0;break}n||a.find(".select-supir").val(0);for(var l="",d=!1,e=0;e<alat.length;e++)if(""!=(l=alat[e].shipment_ids)&&-1!=l.indexOf(i)){a.find(".select-alat").val(alat[e].id),d=!0;break}d||a.find(".select-alat").val(0)}else if(0==a.find(".select-jenis-muatan").val()){var r=a.find(".select-supir");""!=r.find(":selected").data("shipment-ids")&&r.val(0);var o=a.find(".select-alat");""!=o.find(":selected").data("shipment-ids")&&o.val(0)}}),$(document).on("change",".select-alat",function(){var a=$(this).closest(".tr-kiriman"),t=$(this).find(":selected").data("shipment-ids")+"";if(""!=t){for(var i=(t=t.split(","))[0],s="",n=!1,e=0;e<supir.length;e++)if(""!=(s=supir[e].shipment_ids)&&-1!=s.indexOf(i)){a.find(".select-supir").val(supir[e].id),n=!0;break}n||a.find(".select-supir").val(0);for(var l="",d=!1,e=0;e<kendaraan.length;e++)if(""!=(l=kendaraan[e].shipment_ids)&&-1!=l.indexOf(i)){a.find(".select-kendaraan").val(kendaraan[e].id),d=!0;break}d||a.find(".select-kendaraan").val(0)}else if(0==a.find(".select-jenis-muatan").val()){var r=a.find(".select-supir");""!=r.find(":selected").data("shipment-ids")&&r.val(0);var o=a.find(".select-kendaraan");""!=o.find(":selected").data("shipment-ids")&&o.val(0)}}),$(document).on("click",".btn-pesan",function(){var a=$(this).closest(".tr-kiriman"),t=a.data("id"),i=a.data("shipment-title"),s=a.data("asal"),n=a.data("tujuan"),e=a.find(".td-km").html(),l=a.find(".select-jenis-muatan").val(),d=a.find(".select-jenis-muatan option:selected").text(),r=a.find(".select-supir").val(),o=0==r?"":a.find(".select-supir option:selected").text(),c=a.find(".select-kendaraan").val(),m=0==c?"":a.find(".select-kendaraan option:selected").text(),u=a.find(".select-alat").val(),p=0==u?"":a.find(".select-alat option:selected").text();$(".dialog-konfirmasi-pesan-kiriman").data("id",t),$(".dialog-konfirmasi-pesan-kiriman").data("jenis_muatan",l),$(".dialog-konfirmasi-pesan-kiriman").data("driver_id",r),$(".dialog-konfirmasi-pesan-kiriman").data("vehicle_id",c),$(".dialog-konfirmasi-pesan-kiriman").data("device_id",u),$(".dialog-konfirmasi-pesan-kiriman .dialog-body").html("Nama Kiriman : "+i+"<br>Asal : "+s+"<br>Tujuan : "+n+"<br>Jarak : "+e+" Km<br>Jenis Muatan : "+d+"<br>Supir : "+o+"<br>Kendaraan : "+m+"<br>Alat : "+p),showDialog(".dialog-konfirmasi-pesan-kiriman")}),$(document).on("click",".btn-submit-pesan-kiriman",function(){submitPesan()}),$(document).on("click",".btn-dikirim",function(){var a=$(this).closest(".tr-kiriman"),t=a.data("id"),i=a.data("shipment-title"),s=a.data("asal"),n=a.data("tujuan"),e=a.find(".td-km").html(),l=a.find(".td-jenis-muatan").html(),d=a.find(".td-supir").html(),r=a.find(".td-kendaraan").html(),o=a.find(".td-alat").html();$(".dialog-konfirmasi-kirim-kiriman").data("id",t),$(".dialog-konfirmasi-kirim-kiriman .dialog-body").html("Nama Kiriman : "+i+"<br>Asal : "+s+"<br>Tujuan : "+n+"<br>Jarak : "+e+" Km<br>Jenis Muatan : "+l+"<br>Supir : "+d+"<br>Kendaraan : "+r+"<br>Alat : "+o),showDialog(".dialog-konfirmasi-kirim-kiriman")}),$(document).on("click",".btn-submit-kirim-kiriman",function(){submitKirim()}),$(document).on("click",".btn-diambil",function(){var a=$(this).closest(".tr-kiriman"),t=a.data("id"),i=a.data("shipment-title"),s=a.data("asal"),n=a.data("tujuan"),e=a.find(".td-km").html(),l=a.find(".td-jenis-muatan").html(),d=a.find(".td-supir").html(),r=a.find(".td-kendaraan").html(),o=a.find(".td-alat").html();$(".dialog-konfirmasi-ambil-kiriman").data("id",t),$(".dialog-konfirmasi-ambil-kiriman .dialog-body").html("Nama Kiriman : "+i+"<br>Asal : "+s+"<br>Tujuan : "+n+"<br>Jarak : "+e+" Km<br>Jenis Muatan : "+l+"<br>Supir : "+d+"<br>Kendaraan : "+r+"<br>Alat : "+o),showDialog(".dialog-konfirmasi-ambil-kiriman")}),$(document).on("click",".btn-submit-ambil-kiriman",function(){submitAmbil()}),$(document).on("click",".btn-diterima",function(){var a=$(this).closest(".tr-kiriman"),t=a.data("id"),i=a.data("shipment-title"),s=a.data("asal"),n=a.data("tujuan"),e=a.find(".td-km").html(),l=a.find(".td-jenis-muatan").html(),d=a.find(".td-supir").html(),r=a.find(".td-kendaraan").html(),o=a.find(".td-alat").html();$(".dialog-konfirmasi-terima-kiriman").data("id",t),$(".dialog-konfirmasi-terima-kiriman .dialog-body").html("Nama Kiriman : "+i+"<br>Asal : "+s+"<br>Tujuan : "+n+"<br>Jarak : "+e+" Km<br>Jenis Muatan : "+l+"<br>Supir : "+d+"<br>Kendaraan : "+r+"<br>Alat : "+o),showDialog(".dialog-konfirmasi-terima-kiriman")}),$(document).on("click",".btn-submit-terima-kiriman",function(){submitTerima()}),$(document).on("click",".btn-batal-pengiriman",function(){var a=$(this).closest(".tr-kiriman").data("id"),t=$(this).closest(".tr-kiriman").data("shipment-title");$(".dialog-konfirmasi-cancel-transaction").data("shipment_id",a),$(".dialog-konfirmasi-cancel-transaction .dialog-body").html("Batalkan kiriman "+t+"?"),showDialog(".dialog-konfirmasi-cancel-transaction")}),$(".btn-submit-cancel-transaction").on("click",function(){cancelShipment()}),$(document).on("click",".tabs-content:not([data-tabs-number='7']):not([data-tabs-number='8']) .btn-view-kontak",function(){var a=$(this).closest(".tr-kiriman"),t=$(a).next();0==$(t).height()?($(t).addClass("show"),""==$(t).find(".row-detail-td-content").html().trim()&&getDetailPengirim(a)):$(t).removeClass("show")}),$(document).on("click",".tabs-content[data-tabs-number='7'] .btn-view-kontak",function(){var a=$(this).closest(".tr-kiriman"),t=$(a).next();0==t.height()?(t.addClass("show"),""==t.find(".row-detail-td-content").html().trim()&&getAllStatusKiriman(a,t)):t.removeClass("show")})});